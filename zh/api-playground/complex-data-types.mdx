---
title: "复杂数据类型"
description: "使用 `oneOf`、`anyOf` 和 `allOf` 关键字，基于灵活的模式、可选属性和多种数据格式来描述 API"
---

当你的 API 接受多种数据格式、包含条件字段或采用继承模式时，OpenAPI 的模式组合关键字可以帮助你记录这些灵活的结构。通过使用 `oneOf`、`anyOf` 和 `allOf`，你可以描述能够处理不同输入类型的 API，或将多个模式组合成完整的数据模型。

<div id="oneof-anyof-allof-keywords">
  ## `oneOf`, `anyOf`, `allOf` 关键字
</div>

对于复杂数据类型，OpenAPI 提供了用于组合 schema 的关键字：

- `allOf`：将多个 schema 组合在一起（例如合并对象或扩展基础 schema），其行为类似于 `and` 运算符。
- `anyOf`：接受与任一提供的 schema 匹配的数据，其行为类似于 `or` 运算符。
- `oneOf`：仅接受与提供的 schema 中恰好一个匹配的数据，其行为类似于 `exclusive-or` 运算符。

<Warning>Mintlify 将 `oneOf` 和 `anyOf` 同等处理，因为它们在实际使用中鲜少对 API 使用造成影响。</Warning>

有关这些关键字的详细规范，请参阅 [OpenAPI 文档](https://swagger.io/docs/specification/data-models/oneof-anyof-allof-not/)。

<Info>目前不支持 `not` 关键字。</Info>

<div id="combining-schemas-with-allof">
  ### 使用 `allOf` 组合架构
</div>

当你使用 `allOf` 时，Mintlify 会对你的 OpenAPI 文档进行预处理，以更易读的方式展示复杂的组合。例如，当你用 `allOf` 组合两个对象架构时，Mintlify 会将两者的属性合并为一个对象。这在利用 OpenAPI 的可复用[组件](https://swagger.io/docs/specification/components/)时尤其有用。

```yaml
org_with_users:
  allOf:
    - $ref: '#/components/schemas/Org'
    - type: object
      properties:
        users:
          type: array
          description: 包含该组织中所有用户的数组
# ...
components:
  schemas:
    Org:
      type: object
      properties:
        id:
          type: string
          description: 组织的 ID
```

<ParamField body="org_with_users" type="object">
  <Expandable>
    <ParamField body="id" type="string">
      组织的 ID
    </ParamField>

    <ParamField body="users" type="object[]">
      包含组织内所有用户的数组
    </ParamField>
  </Expandable>
</ParamField>


<div id="providing-options-with-oneof-and-anyof">
  ### 使用 `oneOf` 和 `anyOf` 提供选项
</div>

当你使用 `oneOf` 或 `anyOf` 时，选项会显示在带有选项卡的容器中。请在每个子架构中指定一个 `title` 字段，为各个选项命名。比如，下面演示了如何展示两种不同类型的配送地址：

```yaml
delivery_address:
  oneOf:
    - title: StreetAddress
      type: object
      properties:
        address_line_1:
          type: string
          description: 收件人的街道地址
        # ...
    - title: POBox
      type: object
      properties:
        box_number:
          type: string
          description: 邮政信箱的编号
        # ...
```

<ParamField body="delivery_address" type="object">
  <div className="mt-4 rounded-xl border border-gray-100 px-4 pb-4 pt-2 dark:border-white/10">
    <Tabs>
      <Tab title="StreetAddress">
        <ParamField body="address_line_1" type="string">
          住宅的街道地址
        </ParamField>
      </Tab>

      <Tab title="POBox">
        <ParamField body="box_number" type="string">
          邮政信箱号码
        </ParamField>
      </Tab>
    </Tabs>
  </div>
</ParamField>
