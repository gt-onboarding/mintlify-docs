---
title: "OpenAPI の設定"
description: "ドキュメントページで OpenAPI のエンドポイントを参照する"
---

OpenAPI は API を記述するための仕様です。Mintlify は OpenAPI 3.0 以降のドキュメントに対応しており、インタラクティブな API ドキュメントを生成し、常に最新の状態に保てます。

<div id="add-an-openapi-specification-file">
  ## OpenAPI 仕様ファイルを追加する
</div>

OpenAPI でエンドポイントをドキュメント化するには、[OpenAPI Specification 3.0+](https://swagger.io/specification/) に準拠した、有効な JSON または YAML 形式の OpenAPI ドキュメントが必要です。

1 つまたは複数の OpenAPI ドキュメントから API ページを作成できます。

<div id="describing-your-api">
  ### API の記述
</div>

OpenAPI ドキュメントの学習と作成には、次のリソースをおすすめします。

* [Swagger の OpenAPI ガイド](https://swagger.io/docs/specification/v3_0/basic-structure/)で OpenAPI の構文を学ぶ。
* [OpenAPI 仕様の Markdown ソース](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/)で最新の OpenAPI 仕様の詳細を参照する。
* [Swagger Editor](https://editor.swagger.io/)で OpenAPI ドキュメントを編集・検証・デバッグする。
* [Mint CLI](https://www.npmjs.com/package/mint)で次のコマンドにより OpenAPI ドキュメントを検証する: `mint openapi-check <openapiFilenameOrUrl>`。

<Note>
  Swagger の OpenAPI ガイドは OpenAPI v3.0 向けですが、ほぼすべての情報は v3.1 にも適用できます。v3.0 と v3.1 の違いについては、OpenAPI ブログの [Migrating from OpenAPI 3.0 to
  3.1.0](https://www.openapis.org/blog/2021/02/16/migrating-from-openapi-3-0-to-3-1-0) を参照してください。
</Note>

<div id="specifying-the-url-for-your-api">
  ### API の URL を指定する
</div>

APIプレイグラウンドなどの Mintlify 機能を有効化するには、OpenAPI ドキュメントに API のベース URL を持つ `servers` フィールドを追加してください。

```json
{
  "servers": [
    {
      "url": "https://api.example.com/v1"
    }
  ]
}
```

OpenAPI ドキュメントでは、`/users/{id}` や `/` のように各 API エンドポイントはパスで定義されます。ベース URL は、これらのパスをどこに付加するかを示します。`servers` フィールドの設定方法については、OpenAPI ドキュメントの [API Server and Base Path](https://swagger.io/docs/specification/api-host-and-base-path/) を参照してください。

APIプレイグラウンドは、これらのサーバー URL を使用してリクエストの送信先を判断します。複数のサーバーを指定した場合は、ドロップダウンでサーバーを切り替えられます。サーバーを指定しない場合は、ベース URL がないためリクエストを送信できず、APIプレイグラウンドはシンプルモードで動作します。

API に異なる URL 上に存在するエンドポイントがある場合は、特定のパスまたはオペレーションごとに [servers フィールドをオーバーライド](https://swagger.io/docs/specification/v3_0/api-host-and-base-path/#overriding-servers) できます。

<div id="specifying-authentication">
  ### 認証の指定
</div>

API ドキュメントと APIプレイグラウンドで認証を有効にするには、OpenAPI ドキュメントで `securitySchemes` と `security` フィールドを設定します。API の説明と APIプレイグラウンドは、OpenAPI ドキュメントのセキュリティ設定に基づいて認証フィールドを追加します。

<Steps>
  <Step title="認証方法を定義する">
    ユーザーの認証方法を定義するために `securitySchemes` フィールドを追加します。

    次の例は Bearer 認証の設定です。

    ```json
    {
      "components": {
        "securitySchemes": {
          "bearerAuth": {
            "type": "http",
            "scheme": "bearer"
          }
        }
      }
    }
    ```
  </Step>

  <Step title="エンドポイントに認証を適用する">
    認証を必須にするには `security` フィールドを追加します。

    ```json
    {
      "security": [
        {
          "bearerAuth": []
        }
      ]
    }
    ```
  </Step>
</Steps>

一般的な認証タイプには次のものがあります：

* [API Keys](https://swagger.io/docs/specification/authentication/api-keys/): ヘッダー、クエリ、またはクッキーで渡すキー。
* [Bearer](https://swagger.io/docs/specification/authentication/bearer-authentication/): JWT または OAuth トークン。
* [Basic](https://swagger.io/docs/specification/authentication/basic-authentication/): ユーザー名とパスワード。

API 内でエンドポイントごとに異なる認証方法が必要な場合は、該当のオペレーションに対して[security フィールドをオーバーライド](https://swagger.io/docs/specification/authentication/#:~:text=you%20can%20apply%20them%20to%20the%20whole%20API%20or%20individual%20operations%20by%20adding%20the%20security%20section%20on%20the%20root%20level%20or%20operation%20level%2C%20respectively.)できます。

認証の定義と適用の詳細は、OpenAPI ドキュメントの [Authentication](https://swagger.io/docs/specification/authentication/) を参照してください。

<div id="x-mint-extension">
  ## `x-mint` 拡張
</div>

`x-mint` は、API ドキュメントの生成と表示をより柔軟に制御できるカスタム OpenAPI 拡張です。

<div id="metadata">
  ### メタデータ
</div>

生成された API ページのデフォルトメタデータは、任意のオペレーションに `x-mint: metadata` を追加することで上書きできます。`openapi` を除き、`MDX` のフロントマターで有効な任意のメタデータフィールドを使用できます。

```json {7-13}
{
  "paths": {
    "/users": {
      "get": {
        "summary": "Get users",
        "description": "Retrieve a list of users",
        "x-mint": {
          "metadata": {
            "title": "List all users",
            "description": "Fetch paginated user data with filtering options",
            "og:title": "Display a list of users"
          }
        },
        "parameters": [
          {
            // Parameter configuration
          }
        ]
      }
    }
  }
}
```

<div id="content">
  ### コンテンツ
</div>

自動生成される API ドキュメントの前に、`x-mint: content` を使ってコンテンツを追加します:

```json {6-8}
{
  "paths": {
    "/users": {
      "post": {
        "summary": "Create user",
        "x-mint": {
          "content": "## 前提条件\n\nこのエンドポイントには管理者権限が必要で、レート制限が適用されます。\n\n<Note>ユーザーのメールアドレスはシステム全体で一意である必要があります。</Note>"
        },
        "parameters": [
          {
            // Parameter configuration
          }
        ]
      }
    }
  }
}
```

`content` 拡張は、Mintlify のすべての MDX コンポーネントと書式をサポートします。

<div id="href">
  ### Href
</div>

`x-mint: href` を使用して、ドキュメント内のエンドポイントページのURLを変更します。

```json {6-8, 14-16}
{
  "paths": {
    "/legacy-endpoint": {
      "get": {
        "summary": "Legacy endpoint",
        "x-mint": {
          "href": "/deprecated-endpoints/legacy-endpoint"
        }
      }
    },
    "/documented-elsewhere": {
      "post": {
        "summary": "Special endpoint",
        "x-mint": {
          "href": "/guides/special-endpoint-guide"
        }
      }
    }
  }
}
```

`x-mint: href` が指定されている場合、ナビゲーションの項目はAPIページを生成せず、指定されたURLへ直接リンクします。

<div id="mcp">
  ### MCP
</div>

`x-mint: mcp` を使用して、必要なエンドポイントだけを選択的に Model Context Protocol（MCP）ツールとして公開します。AIツール経由で一般公開しても安全なエンドポイントのみを有効化してください。

<ResponseField name="mcp" type="object">
  エンドポイント用の MCP 設定。

  <Expandable title="MCP">
    <ResponseField name="enabled" type="boolean">
      エンドポイントを MCP ツールとして公開するかどうか。ファイル単位の設定より優先されます。
    </ResponseField>

    <ResponseField name="name" type="string">
      MCP ツールの名前。
    </ResponseField>

    <ResponseField name="description" type="string">
      MCP ツールの説明。
    </ResponseField>
  </Expandable>
</ResponseField>

<CodeGroup>
  ```json Selective enablement {6-9} wrap
  {
    "paths": {
      "/users": {
        "post": {
          "summary": "Create user",
          "x-mint": {
            "mcp": {
              "enabled": true
            },
            // ...
          }
        }
      },
      "/users": {
        "delete": {
          "summary": "Delete user (admin only)",
          // No `x-mint: mcp` so this endpoint is not exposed as an MCP tool
          // ...
        }
      }
    }
  }
  ```

  ```json Global enablement {3-5, 9-13} wrap
  {
    "openapi": "3.1.0",
    "x-mcp": {
        "enabled": true // All endpoints are exposed as MCP tools by default
      },
    "paths": {
      "/api/admin/delete": {
        "delete": {
          "x-mint": {
            "mcp": {
              "enabled": false // Disable MCP for this endpoint
            }
          },
          "summary": "Delete resources"
        }
      }
    }
  }
  ```
</CodeGroup>

詳細は [Model Context Protocol](/ja/ai/model-context-protocol) を参照してください。

<div id="auto-populate-api-pages">
  ## APIページを自動生成する
</div>

`docs.json` の任意のナビゲーション要素に `openapi` フィールドを追加すると、OpenAPI エンドポイントのページを自動生成できます。これらのページの表示位置はナビゲーション構造内で制御でき、専用のAPIセクションとしても、他のページと並べても配置できます。

`openapi` フィールドには、ドキュメントリポジトリ内のファイルパス、またはホストされた OpenAPI ドキュメントのURLのいずれかを指定できます。

生成されたエンドポイントページには、次のデフォルトのメタデータ値が含まれます:

* `title`: オペレーションの `summary` フィールド（存在する場合）。`summary` がない場合は、HTTPメソッドとエンドポイントからタイトルが生成されます。
* `description`: オペレーションの `description` フィールド（存在する場合）。
* `version`: 親のアンカーまたはタブの `version` 値（存在する場合）。
* `deprecated`: オペレーションの `deprecated` フィールド。`true` の場合、サイドナビゲーションおよびエンドポイントページのタイトルの横に「非推奨」ラベルが表示されます。

<Tip>
  自動生成されたAPIページから特定のエンドポイントを除外するには、OpenAPI仕様の該当するオペレーションに
  [x-hidden](/ja/api-playground/managing-page-visibility#x-hidden)
  プロパティを追加してください。
</Tip>

ドキュメントにエンドポイントページを追加する方法は2つあります:

1. **専用のAPIセクション**: 専用のAPIセクション用に、ナビゲーション要素で OpenAPI スペックを参照します。
2. **特定のエンドポイントのみ**: 他のページと並列して、ナビゲーション内で特定のエンドポイントを参照します。

<div id="dedicated-api-sections">
  ### 専用のAPIセクション
</div>

ナビゲーション要素に `openapi` フィールドだけを追加して、他のページは追加せずに専用のAPIセクションを生成できます。仕様内のすべてのエンドポイントが含まれます:

```json {5}
"navigation": {
  "tabs": [
    {
        "tab": "API Reference",
        "openapi": "https://petstore3.swagger.io/api/v3/openapi.json"
    }
  ]
}
```

異なるナビゲーションセクションで複数のOpenAPI仕様を使用できます:

```json {8-11, 15-18}
"navigation": {
  "tabs": [
    {
      "tab": "API Reference",
      "groups": [
        {
          "group": "Users",
          "openapi": {
            "source": "/path/to/openapi-1.json",
            "directory": "api-reference"
          }
        },
        {
          "group": "Admin",
          "openapi": {
            "source": "/path/to/openapi-2.json",
            "directory": "api-reference"
          }
        }
      ]
    }
  ]
}
```

<Note>
  `directory` フィールドは任意で、生成されたAPIページをドキュメントリポジトリ内のどこに保存するかを指定します。指定しない場合、リポジトリの `api-reference` ディレクトリが既定になります。
</Note>

<div id="selective-endpoints">
  ### 選択的なエンドポイント
</div>

ドキュメント内でエンドポイントの表示場所をより柔軟に制御したい場合は、ナビゲーションで特定のエンドポイントを参照できます。この方法により、他のコンテンツと並んでAPIエンドポイントのページを生成できます。

<div id="set-a-default-openapi-spec">
  #### 既定の OpenAPI 仕様を設定する
</div>

ナビゲーション要素に既定の OpenAPI 仕様を設定します。続いて、`pages` フィールドで特定のエンドポイントを参照します:

```json {12, 15-16}
"navigation": {
  "tabs": [
    {
      "tab": "Getting started",
      "pages": [
        "quickstart",
        "installation"
      ]
    },
    {
      "tab": "API reference",
      "openapi": "/path/to/openapi.json",
      "pages": [
        "api-overview",
        "GET /users",
        "POST /users",
        "guides/authentication"
      ]
    }
  ]
}
```

`METHOD /path` という形式に一致するページエントリは、既定の OpenAPI 仕様を用いてそのエンドポイントの API ページを生成します。

<div id="openapi-spec-inheritance">
  #### OpenAPI仕様の継承
</div>

OpenAPI仕様はナビゲーションの階層に従って継承されます。子要素は、独自のOpenAPI仕様を定義しない限り、親の仕様を継承します:

```json {3, 7-8, 11, 13-14}
{
  "group": "API reference",
  "openapi": "/path/to/openapi-v1.json",
  "pages": [
    "overview",
    "authentication",
    "GET /users",
    "POST /users",
    {
      "group": "Orders",
      "openapi": "/path/to/openapi-v2.json",
      "pages": [
        "GET /orders",
        "POST /orders"
      ]
    }
  ]
}
```

<div id="individual-endpoints">
  #### 個別のエンドポイント
</div>

ファイルパスを指定することで、デフォルトの OpenAPI 仕様を設定せずに特定のエンドポイントを参照できます。

```json {5-6}
"navigation": {
  "pages": [
    "introduction",
    "user-guides",
    "/path/to/openapi-v1.json POST /users",
    "/path/to/openapi-v2.json GET /orders"
  ]
}
```

この方法は、異なる仕様から個別のエンドポイントだけが必要な場合や、特定のエンドポイントのみを含めたい場合に便利です。

<div id="create-mdx-files-for-api-pages">
  ## APIページ用の `MDX` ファイルを作成する
</div>

各エンドポイントページを個別に管理するには、各オペレーションごとに `MDX` ページを作成します。これにより、ページのメタデータのカスタマイズ、コンテンツの追加、特定のオペレーションの除外、ナビゲーション内でのページ単位の並び替えが可能になります。

[MindsDB の MDX OpenAPI ページの例](https://github.com/mindsdb/mindsdb/blob/main/docs/rest/databases/create-databases.mdx?plain=1)と、それが彼らの[公開ドキュメント](https://docs.mindsdb.com/rest/databases/create-databases)でどのように表示されるかをご確認ください。

<div id="manually-specify-files">
  ### ファイルを手動で指定する
</div>

各エンドポイントごとに `MDX` ページを作成し、フロントマターの `openapi` フィールドで表示する OpenAPI のオペレーションを指定します。

この方法で OpenAPI のオペレーションを参照すると、名前、説明、パラメータ、レスポンス、そして APIプレイグラウンドが OpenAPI ドキュメントから自動生成されます。

複数の OpenAPI ファイルがある場合は、参照にファイルパスを含めて、Mintlify が正しい OpenAPI ドキュメントを見つけられるようにしてください。OpenAPI ファイルが 1 つだけの場合は、Mintlify が自動的に検出します。

<Note>
  この方法は、ナビゲーションでデフォルトの OpenAPI 仕様を設定しているかどうかに関係なく機能します。フロントマターにファイルパスを含めれば、任意の OpenAPI 仕様の任意のエンドポイントを参照できます。
</Note>

外部の OpenAPI ファイルを参照する場合は、ファイルの URL を `docs.json` に追加してください。

<CodeGroup>
  ```mdx Example
  ---
  title: "Get users"
  description: "Returns all plants from the system that the user has access to"
  openapi: "/path/to/openapi-1.json GET /users"
  deprecated: true
  version: "1.0"
  ---
  ```

  ```mdx Format
  ---
  title: "title of the page"
  description: "description of the page"
  openapi: openapi-file-path method path
  deprecated: boolean (not required)
  version: "version-string" (not required)
  ---
  ```
</CodeGroup>

<Note>
  メソッドとパスは、OpenAPI 仕様内の定義と完全に一致している必要があります。エンドポイントが OpenAPI ファイルに存在しない場合、そのページは空になります。
</Note>

<div id="autogenerate-mdx-files">
  ### `MDX` ファイルを自動生成する
</div>

Mintlify の[scraper](https://www.npmjs.com/package/@mintlify/scraping)を使って、大規模な OpenAPI ドキュメントから `MDX` ページを自動生成します。

<Note>
  OpenAPI ドキュメントは有効である必要があります。有効でない場合はファイルを自動生成できません。
</Note>

scraper は次を生成します:

* OpenAPI ドキュメントの `paths` フィールド内の各オペレーションごとの `MDX` ページ
* OpenAPI ドキュメントがバージョン 3.1+ の場合、`webhooks` フィールド内の各オペレーションごとの `MDX` ページ
* `docs.json` に追加できるナビゲーション項目の配列

<Steps>
  <Step title="`MDX` ファイルを生成する">
    ```bash
    npx @mintlify/scraping@latest openapi-file <path-to-openapi-file>
    ```
  </Step>

  <Step title="出力フォルダを指定する">
    ```bash
    npx @mintlify/scraping@latest openapi-file <path-to-openapi-file> -o api-reference
    ```

    `-o` フラグでファイルの出力先フォルダを指定します。指定しない場合は作業ディレクトリに出力されます。
  </Step>
</Steps>

<div id="create-mdx-files-for-openapi-schemas">
  ### OpenAPI スキーマ用の `MDX` ファイルを作成する
</div>

OpenAPI ドキュメントの `components.schema` フィールドで定義された任意の OpenAPI スキーマごとに、個別のページを作成できます。

<CodeGroup>
  ```mdx Example
  ---
  openapi-schema: OrderItem
  ---
  ```

  ```mdx Format
  ---
  openapi-schema: "schema-key"
  ---
  ```
</CodeGroup>

複数のファイルに同名のスキーマがある場合は、OpenAPI ファイルも指定できます。

<CodeGroup>
  ```mdx Example
  ---
  openapi-schema: en-schema.json OrderItem
  ---
  ```

  ```mdx Format
  ---
  openapi-schema: "path-to-schema-file schema-key"
  ---
  ```
</CodeGroup>

<div id="webhooks">
  ## Webhooks
</div>

Webhooksは、イベント発生時に外部システムへ通知するためにAPIが送信するHTTPコールバックです。WebhooksはOpenAPI 3.1以降のドキュメントでサポートされています。

<div id="define-webhooks-in-your-openapi-specification">
  ### OpenAPI仕様でwebhookを定義する
</div>

OpenAPIドキュメントで、`paths` フィールドと並列して `webhooks` フィールドを追加します。

webhook の定義について詳しくは、OpenAPIドキュメントの [Webhooks](https://spec.openapis.org/oas/v3.1.0#oasWebhooks) を参照してください。

<div id="reference-webhooks-in-mdx-files">
  ### MDXファイルでWebhookを参照する
</div>

Webhook向けのMDXページを作成する場合は、`GET` や `POST` などのHTTPメソッドではなく、`webhook` を使用します:

```mdx
---
title: "Example webhook"
description: "Triggered when an event occurs"
openapi: "path/to/openapi-file webhook example-webhook-name"
---
```

<Note>
  Webhook名は、OpenAPI仕様の `webhooks` フィールドで定義されたキーと完全に一致している必要があります。
</Note>